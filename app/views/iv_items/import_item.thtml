<!DOCTYPE html>
<html lang="en">

<head>
    <script type="text/javascript" src="<?=ROOT_URL;?>/app/webroot/js/jquery-3.3.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="all" href="<?=ROOT_URL;?>/app/webroot/css/ui-smooth/jquery-ui-1.8.13.custom.css" />
</head>
<style>
    .results th {
        padding: 8px;
        background: #666666;
        border-left: 0px solid #FFFFFF;
        border-top: 0px solid #FFFFFF;
        font-weight: bold;
        font-size: 10px;
        font-family: Verdana;
        color: #FFFFFF;
    }
</style>
<script>
    $(document).ready(function($) {
        $("#IvItemBrandId").on("change", function() {
            var brand = $(this).find("option:selected").text();
            $("#brand-name").val(brand);
        });
        $("#IvItemSupplierId").on("change", function() {
            var supllier = $(this).find("option:selected").text();
            $("#supplier-name").val(supllier);
        });

        $("#sub_category_id").on("change", function() {
            var subSategory = $(this).find("option:selected").text();
            $("#sub-category-name").val(subSategory);
        });
        $('#main_category_id').on('change', function() {
            var categoryId = $(this).val();
            var category = $(this).find("option:selected").text();
            // $("#category-name").val(category);
            $.ajax({
                url: "<?=BASE_URL?>/iv_items/getMidCategories",
                data: {
                    categoryId: categoryId
                },
                type: "POST",
                success: function(result) {
                    $('#category_id').empty();
                    $('#category_id').append(result);
                },
                error: function(error) {
                    console.log('error');
                }
            });
        });

        $('#category_id').on('change', function() {
            var categoryId = $(this).val();
            var category = $(this).find("option:selected").text();
            $("#category-name").val(category);
            $.ajax({
                url: "<?=BASE_URL?>/iv_items/getSubCategories",
                data: {
                    categoryId: categoryId
                },
                type: "POST",
                success: function(result) {
                    $('#sub_category_id').empty();
                    $('#sub_category_id').append(result);
                },
                error: function(error) {
                    console.log('error');
                }
            });
        });
    });
</script>

<body>
    <h3 style="text-align: left;">Import Items:</h3>
    <h5>Note: Please add the csv column in this order.</h5>
    <table class="results" cellpadding="3" cellspacing="0" style="border-style: solid;border-width:1px;width: max-content;" width="100%">
        <tr>
            <th>Sku</th>
            <th>Item Name</th>
            <th>Size (H x W x D)</th>
            <th>Description</th>
            <th>Efficiency</th>
            <th>Model</th>
            <th>Supplier Price</th>
            <th>Selling Price</th>
            <th>Dba</th>
            <th>Tonnage</th>
            <th>Seer</th>
            <th>Position</th>
            <th>Voltage</th>
            <th>Mocp</th>
            <th>Mca</th>
            <th>BTU</th>
            <th>Warranty</th>
            <th>Image</th>
        </tr>
    </table>
    <div id="wrap">
        <div class="container">
            <div class="row">
                <form class="form-horizontal" action="import" method="post" name="upload_excel" enctype="multipart/form-data">
                    <fieldset>
                        <!-- Form Name -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="filebutton">Main Category</label>
                            <div class="col-md-4">
                                <select name="main_category_id" id="main_category_id">
                                    <option value="">--</option>
                                    <?php 
                                        foreach($mainCategories as $mainCategory) {
                                    ?>
                                    <option value="<?=$mainCategory['id']?>"><?= $mainCategory['name']?></option>
                                    <?php }?>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="filebutton">Select Category</label>
                            <div class="col-md-4">
                                <select name="category_id" id="category_id">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="filebutton">Select Sub-Category</label>
                            <div class="col-md-4">
                                <select name="sub_category_id" id="sub_category_id">                                  
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="filebutton">Select Brand</label>
                            <div class="col-md-4">
                                <?php echo $html->selectTag('IvItem/brand_id', $brands)?>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="filebutton">Select Supplier</label>
                            <div class="col-md-4">
                                <?php echo $html->selectTag('IvItem/supplier_id', $suppliers)?>
                            </div>
                        </div>

                        <!-- File Button -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="filebutton">Select File</label>
                            <div class="col-md-4">
                                <input type="file" name="file" id="file" class="input-large">
                            </div>
                        </div>
                        <!-- Button -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="singlebutton">Import data</label>
                            <div class="col-md-4">
                                <button type="submit" id="submit" name="Import" class="btn btn-primary button-loading" data-loading-text="Loading...">Import</button>
                            </div>
                        </div>
                    </fieldset>
                    <input type="hidden" name="brandName" id="brand-name" value="">
                    <input type="hidden" name="supplierName" id="supplier-name" value="">
                    <input type="hidden" name="categoryName" id="category-name" value="">
                    <input type="hidden" name="subCategoryName" id="sub-category-name" value="">
                </form>
            </div>
            <!-- <?php
               get_all_records();
            ?> -->
        </div>
    </div>
</body>

</html>