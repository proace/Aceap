<html> 
<head>
<script type="text/javascript" src="<?=ROOT_URL;?>/app/webroot/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="<?=ROOT_URL;?>/app/webroot/js/bria_api_constants.js"></script>
<script type="text/javascript" src="<?=ROOT_URL;?>/app/webroot/js/bria_api_js_sample.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="<?=ROOT_URL;?>/app/webroot/css/store_tree.css" />
<link rel="stylesheet" type="text/css" media="all" href="<?=ROOT_URL;?>/app/webroot/css/ui-smooth/jquery-ui-1.8.13.custom.css" />
<script>
jQuery( document ).ready(function($) {
 $("#add-method").on("click", function(){
            window.open("<?=BASE_URL;?>/payments/editPaymentMethod/", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=300,left=500,width=400,height=400");
        });
 $('#removeMethod').on('click', function(e){
        var selected = [];
         $("input:checkbox[class=checkboxes]:checked").each(function () {
             selected.push($(this).attr('type_id'));
        });
         console.log(selected);
        jQuery.ajax({
          url: "<?=BASE_URL;?>/payments/deletePaymentMethod",
          type: "POST",
          data: {typeIds:selected},
          success: function(data){
            // location.href = "<?=BASE_URL;?>/iv_categories/showPaymentTypes";
                 document.forms['viewform'].submit();
             }
        });
    });   
 $('.method-name').on('click', function(){
            var id = $(this).attr('cat-id');
            window.open("<?=BASE_URL;?>/payments/editPaymentMethod/"+id, "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=300,left=500,width=400,height=400");
        });
});

</script>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
th, td {
  padding: 10px;
  text-align: center;
}   
.question_button {
    background:url(<?=ROOT_URL;?>/app/webroot/img/iconset_coquette/text_page.png) no-repeat center #666;
    border:1px solid #999;
    border-radius:5px;
    width:25px;
    height:25px;
}

.timeslot_button {
    background:url(<?=ROOT_URL;?>/app/webroot/img/iconset_coquette/calendar.png) no-repeat center #666;
    border:1px solid #999;
    border-radius:5px;
    width:25px;
    height:25px;
}

.item_category_button {
    background:url(<?=ROOT_URL;?>/app/webroot/img/iconset_coquette/tree.png) no-repeat center #666;
    border:1px solid #999;
    border-radius:5px;
    width:25px;
    height:25px;
}
</style>
</head>
<form method="GET" action="<?= $PHP_SELF?>" name="viewform">
<input type="hidden" name="action" value="view" >
<input type="hidden" name="order" value="<?=$_GET['order']?>">
<input type="hidden" name="sort" value="<?=$_GET['sort']?>">
<input type="hidden" name="currentPage" value="<?=$_GET['currentPage']?>">
</form>
<form >
<h1>Inventory Payment Method:-</h1>
<input type="button" name="addnew" value="Add new" id="add-method" />
 <input type="button" name="Remove" value="Remove" id="removeMethod" style="margin: 0 0 5px 10px;"/>
<table class="results"  style="border-style: solid;border-width:1px; width: 50%;" width="100%">
    <tr>
        <th width="50"><b>ID</b></td>
        <th width="50">Payment Method</th>
        <th width="10">Delete</th>
   </tr>
        <?php $r=1;
            foreach ($paymentMethods as $obj) {
                $class = 'cell'.(++$r%2);
        ?>
        <td class="firstcol">&nbsp;<?php echo $obj['id']; ?></td>
        <td class="method-name" cat-id="<?=$obj['id']?>" style="cursor: all-scroll;">&nbsp;<?php echo $obj['name']; ?></td>
        <td><input type="checkbox" class="checkboxes" name="remove_<?=$obj['id']?>" id="remove_<?=$obj['id']?>" type_id = "<?=$obj['id']?>"></td>
    </tr>
    <? } ?>
</table>
</form>